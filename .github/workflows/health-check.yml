name: Health Check

on:
  schedule:
    # Run every 5 minutes
    - cron: "*/5 * * * *"
  workflow_dispatch:

jobs:
  health-check:
    name: Check Site Health
    runs-on: ubuntu-latest

    steps:
      - name: Check site availability
        run: |
          response=$(curl -s -o /dev/null -w "%{http_code}" https://yourdomain.com/api/health || echo "000")
          if [ "$response" != "200" ]; then
            echo "❌ Health check failed: HTTP $response"
            exit 1
          else
            echo "✅ Site is healthy: HTTP $response"
          fi

      - name: Check Core Web Vitals
        run: |
          # Add Lighthouse CI or similar here
          echo "Core Web Vitals check would run here"

      - name: Notify on failure
        if: failure()
        uses: actions/github-script@v7
        with:
          script: |
            // Add notification logic (Slack, email, etc.)
            console.log("Health check failed - notification would be sent here");

